theme(plot.background = element_rect(fill='#323d4d'),
legend.position = "top",
legend.justification = "left",
legend.text = element_text(size=12, color="white"),
plot.title = element_text(size=22, family="Open Sans", color="white", margin = margin(t = 10, r = 0, b = 10, l = 0)),
axis.text.x = element_text(size=12, family="Open Sans", lineheight = 1.1, color="white", margin = margin(t = 0, r = 0, b = 0, l = 0)),
axis.text.y = element_text(size=12, family="Open Sans", lineheight = 1.1, color="#888888", margin = margin(t = 0, r = 0, b = 0, l = 0)),
panel.grid = element_line(size=0.1)
)
library(stringr)
library(gridExtra)
library(grid)
library(magick)
library(scales)
mylogo <- image_scale(image_read("/home/yevheniia/textylogo.png"), "380")
# Grouped
p1 = ggplot(data, aes(fill=year, y=value, x=reorder(weapon, -value), label=value)) +
geom_bar(position=position_dodge(0.75), stat="identity", padding=2, width=0.75)+
geom_text(position = position_dodge(0.75), angle = 0, vjust=-1, hjust=0.5, color="white") +
labs(title="Поставки деяких видів зброї до української Армії", x="", y="", fill="")+
scale_x_discrete(labels = function(x) str_wrap(x, width = 10))+
scale_fill_manual(values = c("#387b94", "#dbe78b", "#d73445"))+
theme_minimal()+
theme(plot.background = element_rect(fill='#323d4d'),
legend.position = "top",
legend.justification = "left",
legend.text = element_text(size=12, color="white"),
plot.title = element_text(size=22, family="Open Sans", color="white", margin = margin(t = 10, r = 0, b = 10, l = 0)),
axis.text.x = element_text(size=12, family="Open Sans", lineheight = 1.1, color="white", margin = margin(t = 0, r = 0, b = 0, l = 0)),
axis.text.y = element_text(size=12, family="Open Sans", lineheight = 1.1, color="#888888", margin = margin(t = 0, r = 0, b = 0, l = 0)),
panel.grid = element_line(size=0.1)
)
# Grouped
p1 = ggplot(data, aes(fill=year, y=value, x=reorder(weapon, -value), label=value)) +
geom_bar(position=position_dodge(0.75), stat="identity", width=0.75)+
geom_text(position = position_dodge(0.75), angle = 0, vjust=-1, hjust=0.5, color="white") +
labs(title="Поставки деяких видів зброї до української Армії", x="", y="", fill="")+
scale_x_discrete(labels = function(x) str_wrap(x, width = 10))+
scale_fill_manual(values = c("#387b94", "#dbe78b", "#d73445"))+
theme_minimal()+
theme(plot.background = element_rect(fill='#323d4d'),
legend.position = "top",
legend.justification = "left",
legend.text = element_text(size=12, color="white"),
plot.title = element_text(size=22, family="Open Sans", color="white", margin = margin(t = 10, r = 0, b = 10, l = 0)),
axis.text.x = element_text(size=12, family="Open Sans", lineheight = 1.1, color="white", margin = margin(t = 0, r = 0, b = 0, l = 0)),
axis.text.y = element_text(size=12, family="Open Sans", lineheight = 1.1, color="#888888", margin = margin(t = 0, r = 0, b = 0, l = 0)),
panel.grid = element_line(size=0.1)
)
caption = arrangeGrob(
textGrob('Дані: Біла книги Міноборони України, підрахунок Микола Бєлєсков',
gp = gpar(fontsize = 10, col=text_color, fontfamily ='Open Sans'),
x = 0.1, y = 0.5, just = c('left', 'bottom')),
rasterGrob(mylogo, x = .95, y = 0.4,
just = c('right', 'bottom'),
width = unit(1.5, 'inches')),
ncol=2
)
# 2020_compare
plot = grid.arrange(
p1,
caption,
ncol=1, nrow=2,
heights=c(0.98, 0.05))
caption = arrangeGrob(
textGrob('Дані: Біла книги Міноборони України, підрахунок Микола Бєлєсков',
gp = gpar(fontsize = 10, col=text_color, fontfamily ='Open Sans'),
x = 0.1, y = 0.5, just = c('left', 'bottom')),
rasterGrob(mylogo, x = .95, y = 0.4,
just = c('right', 'bottom'),
width = unit(1.5, 'inches')),
ncol=2
)
caption = arrangeGrob(
textGrob('Дані: Біла книги Міноборони України, підрахунок Микола Бєлєсков',
gp = gpar(fontsize = 10, col="#888888", fontfamily ='Open Sans'),
x = 0.1, y = 0.5, just = c('left', 'bottom')),
rasterGrob(mylogo, x = .95, y = 0.4,
just = c('right', 'bottom'),
width = unit(1.5, 'inches')),
ncol=2
)
# 2020_compare
plot = grid.arrange(
p1,
caption,
ncol=1, nrow=2,
heights=c(0.98, 0.05))
caption = arrangeGrob(
textGrob('Дані: Біла книги Міноборони України, підрахунок Микола Бєлєсков',
gp = gpar(fontsize = 10, col="#888888", fontfamily ='Open Sans', background="#323d4d"),
x = 0.1, y = 0.5, just = c('left', 'bottom')),
rasterGrob(mylogo, x = .95, y = 0.4,
just = c('right', 'bottom'),
width = unit(1.5, 'inches')),
ncol=2
)
# 2020_compare
plot = grid.arrange(
p1,
caption,
ncol=1, nrow=2,
heights=c(0.98, 0.05))
caption = arrangeGrob(
textGrob('Дані: Біла книги Міноборони України, підрахунок Микола Бєлєсков',
gp = gpar(fontsize = 10, col="#888888", fontfamily ='Open Sans'),
x = 0.1, y = 0.5, just = c('left', 'bottom')),
rasterGrob(mylogo, x = .95, y = 0.4,
just = c('right', 'bottom'),
width = unit(1.5, 'inches')),
ncol=2
)
# 2020_compare
plot = grid.arrange(
p1,
caption,
ncol=1, nrow=2,
heights=c(0.98, 0.05))
cowplot::ggdraw(plot) +
theme(plot.background = element_rect(fill="#323d4d", color = NA))
caption = arrangeGrob(
textGrob('Дані: Біла книги Міноборони України, підрахунок Микола Бєлєсков',
gp = gpar(fontsize = 10, col="white", fontfamily ='Open Sans'),
x = 0.1, y = 0.5, just = c('left', 'bottom')),
rasterGrob(mylogo, x = .95, y = 0.4,
just = c('right', 'bottom'),
width = unit(1.5, 'inches')),
ncol=2
)
# 2020_compare
plot = grid.arrange(
p1,
caption,
ncol=1, nrow=2,
heights=c(0.98, 0.05))
cowplot::ggdraw(plot) +
theme(plot.background = element_rect(fill="#323d4d", color = NA))
# Grouped
p1 = ggplot(data, aes(fill=year, y=value, x=reorder(weapon, -value), label=value)) +
geom_bar(position=position_dodge(0.75), stat="identity", width=0.75)+
geom_text(position = position_dodge(0.75), angle = 0, vjust=-1, hjust=0.5, color="white") +
labs(title="Поставки деяких видів зброї до української Армії", x="", y="", fill="")+
scale_x_discrete(labels = function(x) str_wrap(x, width = 10))+
scale_fill_manual(values = c("#387b94", "#dbe78b", "#d73445"))+
theme_minimal()+
theme(plot.background = element_rect(fill='#323d4d', color="none"),
legend.position = "top",
legend.justification = "left",
legend.text = element_text(size=12, color="white"),
plot.title = element_text(size=22, family="Open Sans", color="white", margin = margin(t = 10, r = 0, b = 10, l = 0)),
axis.text.x = element_text(size=12, family="Open Sans", lineheight = 1.1, color="white", margin = margin(t = 0, r = 0, b = 0, l = 0)),
axis.text.y = element_text(size=12, family="Open Sans", lineheight = 1.1, color="#888888", margin = margin(t = 0, r = 0, b = 0, l = 0)),
panel.grid = element_line(size=0.1)
)
caption = arrangeGrob(
textGrob('Дані: Біла книги Міноборони України, підрахунок Микола Бєлєсков',
gp = gpar(fontsize = 10, col="white", fontfamily ='Open Sans'),
x = 0.1, y = 0.5, just = c('left', 'bottom')),
rasterGrob(mylogo, x = .95, y = 0.4,
just = c('right', 'bottom'),
width = unit(1.5, 'inches')),
ncol=2
)
# 2020_compare
plot = grid.arrange(
p1,
caption,
ncol=1, nrow=2,
heights=c(0.98, 0.05))
# Grouped
p1 = ggplot(data, aes(fill=year, y=value, x=reorder(weapon, -value), label=value)) +
geom_bar(position=position_dodge(0.75), stat="identity", width=0.75)+
geom_text(position = position_dodge(0.75), angle = 0, vjust=-1, hjust=0.5, color="white") +
labs(title="Поставки деяких видів зброї до української Армії", x="", y="", fill="")+
scale_x_discrete(labels = function(x) str_wrap(x, width = 10))+
scale_fill_manual(values = c("#387b94", "#dbe78b", "#d73445"))+
theme_minimal()+
theme(plot.background = element_rect(fill='#323d4d', color="transparent"),
legend.position = "top",
legend.justification = "left",
legend.text = element_text(size=12, color="white"),
plot.title = element_text(size=22, family="Open Sans", color="white", margin = margin(t = 10, r = 0, b = 10, l = 0)),
axis.text.x = element_text(size=12, family="Open Sans", lineheight = 1.1, color="white", margin = margin(t = 0, r = 0, b = 0, l = 0)),
axis.text.y = element_text(size=12, family="Open Sans", lineheight = 1.1, color="#888888", margin = margin(t = 0, r = 0, b = 0, l = 0)),
panel.grid = element_line(size=0.1)
)
caption = arrangeGrob(
textGrob('Дані: Біла книги Міноборони України, підрахунок Микола Бєлєсков',
gp = gpar(fontsize = 10, col="white", fontfamily ='Open Sans'),
x = 0.1, y = 0.5, just = c('left', 'bottom')),
rasterGrob(mylogo, x = .95, y = 0.4,
just = c('right', 'bottom'),
width = unit(1.5, 'inches')),
ncol=2
)
# 2020_compare
plot = grid.arrange(
p1,
caption,
ncol=1, nrow=2,
heights=c(0.98, 0.05))
cowplot::ggdraw(plot) +
theme(plot.background = element_rect(fill="#323d4d", color = NA))
caption = arrangeGrob(
textGrob('Дані: Біла книги Міноборони України, підрахунок Микола Бєлєсков',
gp = gpar(fontsize = 11, col="white", fontfamily ='Open Sans'),
x = 0.1, y = 0.5, just = c('left', 'bottom')),
rasterGrob(mylogo, x = .95, y = 0.4,
just = c('right', 'bottom'),
width = unit(1.5, 'inches')),
ncol=2
)
# 2020_compare
plot = grid.arrange(
p1,
caption,
ncol=1, nrow=2,
heights=c(0.98, 0.05))
cowplot::ggdraw(plot) +
theme(plot.background = element_rect(fill="#323d4d", color = NA))
mylogo <- image_scale(image_read("/home/yevheniia/white_logo.png"), "380")
# create a dataset
weapon <- c(
rep("Засоби зв’язку",3),
rep("Протитанкові ракетні комплекси",3),
rep("Безпілотні авіаційні комплекси",3),
rep("РЕБ",3),
rep("Радіолокаційні стації",3),
rep("Літаки та гелікоптери",3)
)
year = rep(c("2018", "2019", "2020"), 6 )
value <- c(840,635,394,200,162,76,75,64,46,38,23,18,31,18,15,30,22,15)
data <- data.frame(weapon,year,value)
# Grouped
p1 = ggplot(data, aes(fill=year, y=value, x=reorder(weapon, -value), label=value)) +
geom_bar(position=position_dodge(0.75), stat="identity", width=0.75)+
geom_text(position = position_dodge(0.75), angle = 0, vjust=-1, hjust=0.5, color="white") +
labs(title="Поставки деяких видів зброї до української Армії", x="", y="", fill="")+
scale_x_discrete(labels = function(x) str_wrap(x, width = 10))+
scale_fill_manual(values = c("#387b94", "#dbe78b", "#d73445"))+
theme_minimal()+
theme(plot.background = element_rect(fill='#323d4d', color="transparent"),
legend.position = "top",
legend.justification = "left",
legend.text = element_text(size=12, color="white"),
plot.title = element_text(size=22, family="Open Sans", color="white", margin = margin(t = 10, r = 0, b = 10, l = 0)),
axis.text.x = element_text(size=12, family="Open Sans", lineheight = 1.1, color="white", margin = margin(t = 0, r = 0, b = 0, l = 0)),
axis.text.y = element_text(size=12, family="Open Sans", lineheight = 1.1, color="#888888", margin = margin(t = 0, r = 0, b = 0, l = 0)),
panel.grid = element_line(size=0.1)
)
caption = arrangeGrob(
textGrob('Дані: Біла книги Міноборони України, підрахунок Микола Бєлєсков',
gp = gpar(fontsize = 11, col="white", fontfamily ='Open Sans'),
x = 0.1, y = 0.5, just = c('left', 'bottom')),
rasterGrob(mylogo, x = .95, y = 0.4,
just = c('right', 'bottom'),
width = unit(1.5, 'inches')),
ncol=2
)
# 2020_compare
plot = grid.arrange(
p1,
caption,
ncol=1, nrow=2,
heights=c(0.98, 0.05))
cowplot::ggdraw(plot) +
theme(plot.background = element_rect(fill="#323d4d", color = NA))
# ======================================================
months = c("Липень", "Серпень", "Вересень", "Жовтень", "Листопад")
replacement = c("2021-07-01", "2021-08-01", "2021-09-01", "2021-10-01", "2021-11-01")
library(readr)
setwd("/home/yevheniia/git/food_prices/data/")
df = read.csv("cpi_q1_median_january_2022.csv", stringsAsFactors = F) %>%
filter(measure == "Q1") %>%
rename(item = name) %>%
rename(price = value) %>%
select(-inflation) %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation_dynamic = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation_dynamic = as.numeric(inflation_dynamic)+100) %>%
mutate(inflation_dynamic = ifelse(is.na(inflation_dynamic), 100, inflation_dynamic)) %>%
group_by(item) %>%
arrange(month) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation = as.numeric(inflation)+100) %>%
mutate(inflation = ifelse(is.na(inflation), 100, inflation))
library(dplyr)
library(tidyr)
library(stringr)
library(ggplot2)
library(stringr)
library(gridExtra)
library(grid)
library(magick)
library(scales)
# ======================================================
months = c("Липень", "Серпень", "Вересень", "Жовтень", "Листопад")
replacement = c("2021-07-01", "2021-08-01", "2021-09-01", "2021-10-01", "2021-11-01")
library(readr)
setwd("/home/yevheniia/git/food_prices/data/")
df = read.csv("cpi_q1_median_january_2022.csv", stringsAsFactors = F) %>%
filter(measure == "Q1") %>%
rename(item = name) %>%
rename(price = value) %>%
select(-inflation) %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation_dynamic = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation_dynamic = as.numeric(inflation_dynamic)+100) %>%
mutate(inflation_dynamic = ifelse(is.na(inflation_dynamic), 100, inflation_dynamic)) %>%
group_by(item) %>%
arrange(month) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation = as.numeric(inflation)+100) %>%
mutate(inflation = ifelse(is.na(inflation), 100, inflation))
setwd("/home/yevheniia/git/food_prices/data/govstat_xlsx/")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
separate(X.1, c("product", "weight"), sep="\\(", remove=F) %>%
select(-product) %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`) %>%
filter(item != "") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item),
month = str_replace_all(month, setNames(replacement, months))
) %>%
# деякі продуктти держстат рахує у вазі від 100гр до 0.75 л.,
# через це перераховуємо вагу на кг, щоб можна було їх порівнювати
mutate(weight = gsub("\\)", "", weight ),
weight = gsub('[А-Яа-я]', "", weight),
weight = gsub(',', ".", weight),
weight = as.numeric(weight),
weight = ifelse(weight < 1, weight*1000, weight),
weight = ifelse(is.na(weight), 1000, weight),
price = price * (1000/weight)
)  %>%
select(-weight)
# на основі даних по інфляції доповнюємо ціни за 2017-2020 рр.
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price") %>%
rbind(govstat_prices) %>%
unique() %>%
mutate(measure = "govstat") %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation_dynamic = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation_dynamic = as.numeric(inflation_dynamic)+100) %>%
filter(!is.na(price)) %>%
mutate(inflation_dynamic = ifelse(is.na(inflation_dynamic), 100, inflation_dynamic))
df = df %>% bind_rows(govstat_prices_supplement) %>%
rename(name = item) %>%
select(-X)
products = c("молоко пастеризоване жирністю до 2,6% включно",
"молоко з підвищеним вмістом жиру",
"сметана жирністю до 15% включно",
"сметана з підвищеним вмістом жиру",
"ковбаси варені вищого ґатунку",
"ковбаси варені першого ґатунку",
"сосиски, сардельки вищого ґатунку",
"сосиски, сардельки першого ґатунку",
"вироби з м’яса делікатесні"
)
replacement_products = c("молоко 2.5%",
"молоко 3.2%",
"сметана 10-15%",
"сметана 20%+",
"ковбаси варені в/ґ",
"ковбаси варені 1/ґ",
"сосиски, сардельки в/ґ",
"сосиски, сардельки 1/ґ",
"м’ясні делікатеси"
)
df = df %>%
mutate(short_name = str_replace_all(name, setNames(replacement_products, products))) %>%
filter(short_name != "авокадо" & short_name != "ягоди" & short_name != "кавуни" & short_name != "виноград")
table(df$name)
table(df$category)
test = data.frame(table(df$category))
View(test)
View(test)
View(test)
test = data.frame(table(df$category)) %>% write.csv("/home/yevheniia/Стільниця/test.csv")
# ======================================================
months = c("Липень", "Серпень", "Вересень", "Жовтень", "Листопад")
replacement = c("2021-07-01", "2021-08-01", "2021-09-01", "2021-10-01", "2021-11-01")
library(readr)
setwd("/home/yevheniia/git/food_prices/data/")
df = read.csv("cpi_q1_median_january_2022.csv", stringsAsFactors = F) %>%
filter(measure == "Q1") %>%
rename(item = name) %>%
rename(price = value) %>%
select(-inflation) %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation_dynamic = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation_dynamic = as.numeric(inflation_dynamic)+100) %>%
mutate(inflation_dynamic = ifelse(is.na(inflation_dynamic), 100, inflation_dynamic)) %>%
group_by(item) %>%
arrange(month) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation = as.numeric(inflation)+100) %>%
mutate(inflation = ifelse(is.na(inflation), 100, inflation))
setwd("/home/yevheniia/git/food_prices/data/govstat_xlsx/")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
separate(X.1, c("product", "weight"), sep="\\(", remove=F) %>%
select(-product) %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`) %>%
filter(item != "") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item),
month = str_replace_all(month, setNames(replacement, months))
) %>%
# деякі продуктти держстат рахує у вазі від 100гр до 0.75 л.,
# через це перераховуємо вагу на кг, щоб можна було їх порівнювати
mutate(weight = gsub("\\)", "", weight ),
weight = gsub('[А-Яа-я]', "", weight),
weight = gsub(',', ".", weight),
weight = as.numeric(weight),
weight = ifelse(weight < 1, weight*1000, weight),
weight = ifelse(is.na(weight), 1000, weight),
price = price * (1000/weight)
)  %>%
select(-weight)
# на основі даних по інфляції доповнюємо ціни за 2017-2020 рр.
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price") %>%
rbind(govstat_prices) %>%
unique() %>%
mutate(measure = "govstat") %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation_dynamic = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation_dynamic = as.numeric(inflation_dynamic)+100) %>%
filter(!is.na(price)) %>%
mutate(inflation_dynamic = ifelse(is.na(inflation_dynamic), 100, inflation_dynamic))
df = df %>% bind_rows(govstat_prices_supplement) %>%
rename(name = item) %>%
select(-X)
products = c("молоко пастеризоване жирністю до 2,6% включно",
"молоко з підвищеним вмістом жиру",
"сметана жирністю до 15% включно",
"сметана з підвищеним вмістом жиру",
"ковбаси варені вищого ґатунку",
"ковбаси варені першого ґатунку",
"сосиски, сардельки вищого ґатунку",
"сосиски, сардельки першого ґатунку",
"вироби з м’яса делікатесні"
)
replacement_products = c("молоко 2.5%",
"молоко 3.2%",
"сметана 10-15%",
"сметана 20%+",
"ковбаси варені в/ґ",
"ковбаси варені 1/ґ",
"сосиски, сардельки в/ґ",
"сосиски, сардельки 1/ґ",
"м’ясні делікатеси"
)
df = df %>%
mutate(short_name = str_replace_all(name, setNames(replacement_products, products))) %>%
filter(short_name != "авокадо" & short_name != "ягоди" & short_name != "кавуни" & short_name != "виноград") %>%
left_join(read.csv("/home/yevheniia/git/food_prices/data/category_picture_pair.csv"), by=category)
df = df %>%
mutate(short_name = str_replace_all(name, setNames(replacement_products, products))) %>%
filter(short_name != "авокадо" & short_name != "ягоди" & short_name != "кавуни" & short_name != "виноград") %>%
left_join(read.csv("/home/yevheniia/git/food_prices/data/category_picture_pair.csv"), by="category")
setwd("/home/yevheniia/git/food_prices/data/")
write.csv(df, "cpi_q1_median_january_2022_and_govstat_history.csv", row.names = F)
