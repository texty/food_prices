`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
)
govstat_prices$item[42]
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`,
`2021-10-01` = price) %>%
filter(item != "") %>%
filter(month == "Жовтень") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item),
item = gsub("\\s$", "", item)
) %>%
select(-month)
govstat_prices$item[42]
setwd("/home/yevheniia/git/food_prices/data/govstat_xlsx/")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`,
`2021-10-01` = price) %>%
filter(item != "") %>%
filter(month == "Жовтень") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item),
item = gsub(" $", "", item)
) %>%
select(-month)
govstat_prices$item[42]
setwd("/home/yevheniia/git/food_prices/data/govstat_xlsx/")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`,
`2021-10-01` = price) %>%
filter(item != "") %>%
filter(month == "Жовтень") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item),
item = gsub("фарш м’ясний ", "фарш м’ясний", item)
) %>%
select(-month)
govstat_prices$item[42]
setwd("/home/yevheniia/git/food_prices/data/govstat_xlsx/")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`,
`2021-10-01` = price) %>%
filter(item != "") %>%
filter(month == "Жовтень") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item),
item = gsub(" ", "", item)
) %>%
select(-month)
govstat_prices$item[42]
setwd("/home/yevheniia/git/food_prices/data/govstat_xlsx/")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`,
`2021-10-01` = price) %>%
filter(item != "") %>%
filter(month == "Жовтень") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item),
item = gsub(" ", "", item)
) %>%
select(-month)
govstat_prices$item[42]
cpi = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices, by='item')
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`,
`2021-10-01` = price) %>%
filter(item != "") %>%
filter(month == "Жовтень") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item)
) %>%
select(-month)
cpi = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices, by='item')
setwd("/home/yevheniia/git/food_prices/data/govstat_xlsx/")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`,
`2021-10-01` = price) %>%
filter(item != "") %>%
filter(month == "Жовтень") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item)
) %>%
select(-month)
cpi = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices, by='item')
cpi = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices, by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
)
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices, by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
)
select(1,7:11)
# на основі даних по інфляції доповнюємо ціни за 2017-2020 рр.
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices, by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11)
View(govstat_prices_supplement)
# на основі даних по інфляції доповнюємо ціни за 2017-2020 рр.
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices, by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price")
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices, by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`,
`2021-10-01` = price) %>%
filter(item != "") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item)
)
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`) %>%
filter(item != "") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item)
)
setwd("/home/yevheniia/git/food_prices/data/govstat_xlsx/")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`) %>%
filter(item != "") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item),
month = str_replace_all(month, setNames(replacement, months))
)
# ======================================================
months = c("Липень", "Серпень", "Вересень", "Жовтень", "Листопад")
replacement = c("2021-07-01", "2021-08-01", "2021-09-01", "2021-10-01", "2021-11-01")
setwd("/home/yevheniia/git/food_prices/data/govstat_xlsx/")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`) %>%
filter(item != "") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item),
month = str_replace_all(month, setNames(replacement, months))
)
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price") %>%
mutate(measure = "govstat")
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price")
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price") %>%
rbind(govstat_prices) %>%
unique() %>%
mutate(measure = "govstat")
# на основі даних по інфляції доповнюємо ціни за 2017-2020 рр.
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price") %>%
rbind(govstat_prices) %>%
unique() %>%
mutate(measure = "govstat") %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup()
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price") %>%
rbind(govstat_prices) %>%
unique() %>%
mutate(measure = "govstat") %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation = as.numeric(inflation)+100)
# на основі даних по інфляції доповнюємо ціни за 2017-2020 рр.
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price") %>%
rbind(govstat_prices) %>%
unique() %>%
mutate(measure = "govstat") %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation = as.numeric(inflation)+100) %>%
filter(!is.na(price))
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price") %>%
rbind(govstat_prices) %>%
unique() %>%
mutate(measure = "govstat") %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation = as.numeric(inflation)+100) %>%
filter(!is.na(price)) %>%
mutate(inflation = ifesle(is.na(inflation), 100, inflation))
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price") %>%
rbind(govstat_prices) %>%
unique() %>%
mutate(measure = "govstat") %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation = as.numeric(inflation)+100) %>%
filter(!is.na(price)) %>%
mutate(inflation = ifelse(is.na(inflation), 100, inflation))
df = read.csv("cpi_q1_median_november_2021.csv", stringsAsFactors = F) %>%
filter(measure == "Q1")
setwd("/home/yevheniia/git/food_prices/data/")
df = read.csv("cpi_q1_median_november_2021.csv", stringsAsFactors = F) %>%
filter(measure == "Q1")
df = read.csv("cpi_q1_median_november_2021.csv", stringsAsFactors = F) %>%
filter(measure == "Q1") %>%
rename(item = name) %>%
rename(price = value) %>%
select(-infliation)
setwd("/home/yevheniia/git/food_prices/data/")
df = read.csv("cpi_q1_median_november_2021.csv", stringsAsFactors = F) %>%
filter(measure == "Q1") %>%
rename(item = name) %>%
rename(price = value) %>%
select(-inflation)
setwd("/home/yevheniia/git/food_prices/data/")
df = read.csv("cpi_q1_median_november_2021.csv", stringsAsFactors = F) %>%
filter(measure == "Q1") %>%
rename(item = name) %>%
rename(price = value) %>%
select(-inflation) %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup()
df = read.csv("cpi_q1_median_november_2021.csv", stringsAsFactors = F) %>%
filter(measure == "Q1") %>%
rename(item = name) %>%
rename(price = value) %>%
select(-inflation) %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation = as.numeric(inflation)+100) %>%
mutate(inflation = ifelse(is.na(inflation), 100, inflation))
df = df %>% bind_rows(govstat_prices_supplement)
# ======================================================
months = c("Липень", "Серпень", "Вересень", "Жовтень", "Листопад")
replacement = c("2021-07-01", "2021-08-01", "2021-09-01", "2021-10-01", "2021-11-01")
library(readr)
setwd("/home/yevheniia/git/food_prices/data/")
df = read.csv("cpi_q1_median_november_2021.csv", stringsAsFactors = F) %>%
filter(measure == "Q1") %>%
rename(item = name) %>%
rename(price = value) %>%
select(-inflation) %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation = as.numeric(inflation)+100) %>%
mutate(inflation = ifelse(is.na(inflation), 100, inflation))
setwd("/home/yevheniia/git/food_prices/data/govstat_xlsx/")
govstat_prices = read.csv("govstat_ціни.csv", skip=2) %>% select(-1) %>%
gather(2:6, key="month", value="price") %>%
mutate(price = gsub(',', ".", price),
price = as.numeric(price)) %>%
rename(`item` = `X.1`) %>%
filter(item != "") %>%
mutate(item = tolower(item),
item = gsub(" \\(\\d.*", "", item),
item = trimws(item),
month = str_replace_all(month, setNames(replacement, months))
)
# на основі даних по інфляції доповнюємо ціни за 2017-2020 рр.
govstat_prices_supplement = read.csv("ІСЦ 2017-2021.csv", stringsAsFactors = F) %>%
select(item, contains("10.01")) %>%
mutate(item = tolower(item),
item = trimws(item)) %>%
left_join(govstat_prices %>%
filter(month == "2021-10-01") %>%
select(-month) %>%
rename(`2021-10-01` = price), by='item') %>%
mutate_at(c(2:6), parse_number, locale = locale(decimal_mark = ",")) %>%
mutate(`2020-10-01` = (`2021-10-01`/X2021.10.01) * 100,
`2019-10-01` = (`2020-10-01`/X2020.10.01) * 100,
`2018-10-01` = (`2019-10-01`/X2019.10.01) * 100,
`2017-10-01` = (`2018-10-01`/X2018.10.01) * 100,
) %>%
select(1,7:11) %>%
gather(2:6, key="month", value="price") %>%
rbind(govstat_prices) %>%
unique() %>%
mutate(measure = "govstat") %>%
group_by(item) %>%
arrange(desc(month)) %>%
mutate(inflation = paste0(formatC((price - lag(price))*100/lag(price), digits = 2))) %>%
ungroup() %>%
mutate(inflation = as.numeric(inflation)+100) %>%
filter(!is.na(price)) %>%
mutate(inflation = ifelse(is.na(inflation), 100, inflation))
df = df %>% bind_rows(govstat_prices_supplement) %>%
rename(name = item) %>%
select(-X)
setwd("/home/yevheniia/git/food_prices/data/")
write.csv(df, "cpi_q1_median_november_2021_and_govstat_history.csv", row.names = F)
