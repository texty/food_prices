lineheight = 1.1,
color=text_color,
family ='Open Sans',
margin=margin(0,0,10,0),
)
)
ggplot(static_chart_data)+
geom_rect(color_dat, mapping=aes(ymax = y, fill=z), ymin=0, xmin = as.Date("2021-07-15"), xmax= as.Date("2021-08-01"))+
# scale_fill_gradient("#000080", "#7CB3C5")+
geom_line(mapping=aes(x=month, y=price_q1, color = '#000080'))+
geom_line(mapping=aes(x=month, y=price_min, color = '#7CB3C5'))+
geom_line(mapping=aes(x=month, y=price, color = '#D7005C'))+
# annotation_custom(g,xmin = as.Date("2021-07-15"), xmax = as.Date("2021-07-28"), ymin = -Inf,  ymax = Inf ) +
facet_wrap(~item, scales="free", ncol=6) +
scale_y_continuous(expand = expansion(mult = c(0, 0.2), add = c(0, 0.1)), limits=c(0, NA),
breaks=function(x, n = 10) pretty(x, n)[round(pretty(x, n), 1) %% 1 == 0])+
scale_x_date(date_breaks = "1 month", limits = as.Date(c('15/7/2021', '02/11/2021'), format="%d/%m/%Y"), date_labels = "%b")+
labs(
title="Ціни на продукти харчування: у супермаркеті та підрахунках держстату",
subtitle="Держстат бере для підрахунку інфляції не дорогі продукти, проте не найдешевші. \nНа графіку нижче ціни на продукти в одному з відомих супермаркетів (сині лінії) і ціни \nз розрахунків держстату (червона)",
color='',
y="", x="")+
scale_color_identity(name = "",
breaks = c("#D7005C", "#000080", "#7CB3C5"),
labels = c("держстат", "супермаркет: усереднена (1 квартиль)", "супермаркет: мінімальна"),
guide = "legend")+
# scale_fill_gradientn(colors = c("#7CB3C5", "#000080", "black"),
#                      breaks = c(0, 50, 200, 300))+
# scale_fill_gradient2(low = "white", high = "#000080") +
scale_fill_gradientn(limits = c(0,400),
colours=c("#7CB3C5", "#000080", "black"))+
theme_minimal()+
guides(fill = 'none')+
theme(
legend.title=element_text(size=11),
legend.justification = "left",
legend.position='top',
legend.margin = margin(c(5, 5, 5, 0)),
legend.text = element_text(size=11, family=fontfamily, color=text_color, margin = margin(r = 10, unit = "pt")),
panel.spacing.x=unit(0.5, "lines") ,
panel.spacing.y=unit(2,"lines"),
panel.grid.major.x=element_blank(),
panel.grid.minor.x=element_blank(),
panel.grid.minor.y=element_blank(),
strip.text = element_text(hjust=0, face='bold', family=fontfamily, color=text_color),
plot.title = element_text(size=18,
lineheight = 1.6,
margin=margin(0,0,10,0),
face="bold",
color=text_color,
family ='Open Sans'
),
plot.subtitle = element_text(size=15,
lineheight = 1.1,
color=text_color,
family ='Open Sans',
margin=margin(0,0,10,0),
)
)
ggplot(static_chart_data)+
geom_rect(color_dat, mapping=aes(ymax = y, fill=z), ymin=0, xmin = as.Date("2021-07-15"), xmax= as.Date("2021-08-25"))+
# scale_fill_gradient("#000080", "#7CB3C5")+
geom_line(mapping=aes(x=month, y=price_q1, color = '#000080'))+
geom_line(mapping=aes(x=month, y=price_min, color = '#7CB3C5'))+
geom_line(mapping=aes(x=month, y=price, color = '#D7005C'))+
# annotation_custom(g,xmin = as.Date("2021-07-15"), xmax = as.Date("2021-07-28"), ymin = -Inf,  ymax = Inf ) +
facet_wrap(~item, scales="free", ncol=6) +
scale_y_continuous(expand = expansion(mult = c(0, 0.2), add = c(0, 0.1)), limits=c(0, NA),
breaks=function(x, n = 10) pretty(x, n)[round(pretty(x, n), 1) %% 1 == 0])+
scale_x_date(date_breaks = "1 month", limits = as.Date(c('15/7/2021', '02/11/2021'), format="%d/%m/%Y"), date_labels = "%b")+
labs(
title="Ціни на продукти харчування: у супермаркеті та підрахунках держстату",
subtitle="Держстат бере для підрахунку інфляції не дорогі продукти, проте не найдешевші. \nНа графіку нижче ціни на продукти в одному з відомих супермаркетів (сині лінії) і ціни \nз розрахунків держстату (червона)",
color='',
y="", x="")+
scale_color_identity(name = "",
breaks = c("#D7005C", "#000080", "#7CB3C5"),
labels = c("держстат", "супермаркет: усереднена (1 квартиль)", "супермаркет: мінімальна"),
guide = "legend")+
# scale_fill_gradientn(colors = c("#7CB3C5", "#000080", "black"),
#                      breaks = c(0, 50, 200, 300))+
# scale_fill_gradient2(low = "white", high = "#000080") +
scale_fill_gradientn(limits = c(0,400),
colours=c("#7CB3C5", "#000080", "black"))+
theme_minimal()+
guides(fill = 'none')+
theme(
legend.title=element_text(size=11),
legend.justification = "left",
legend.position='top',
legend.margin = margin(c(5, 5, 5, 0)),
legend.text = element_text(size=11, family=fontfamily, color=text_color, margin = margin(r = 10, unit = "pt")),
panel.spacing.x=unit(0.5, "lines") ,
panel.spacing.y=unit(2,"lines"),
panel.grid.major.x=element_blank(),
panel.grid.minor.x=element_blank(),
panel.grid.minor.y=element_blank(),
strip.text = element_text(hjust=0, face='bold', family=fontfamily, color=text_color),
plot.title = element_text(size=18,
lineheight = 1.6,
margin=margin(0,0,10,0),
face="bold",
color=text_color,
family ='Open Sans'
),
plot.subtitle = element_text(size=15,
lineheight = 1.1,
color=text_color,
family ='Open Sans',
margin=margin(0,0,10,0),
)
)
ggplot(static_chart_data)+
geom_rect(color_dat, mapping=aes(ymax = y, fill=z), ymin=0, xmin = as.Date("2021-07-15"), xmax= as.Date("2021-07-25"))+
# scale_fill_gradient("#000080", "#7CB3C5")+
geom_line(mapping=aes(x=month, y=price_q1, color = '#000080'))+
geom_line(mapping=aes(x=month, y=price_min, color = '#7CB3C5'))+
geom_line(mapping=aes(x=month, y=price, color = '#D7005C'))+
# annotation_custom(g,xmin = as.Date("2021-07-15"), xmax = as.Date("2021-07-28"), ymin = -Inf,  ymax = Inf ) +
facet_wrap(~item, scales="free", ncol=6) +
scale_y_continuous(expand = expansion(mult = c(0, 0.2), add = c(0, 0.1)), limits=c(0, NA),
breaks=function(x, n = 10) pretty(x, n)[round(pretty(x, n), 1) %% 1 == 0])+
scale_x_date(date_breaks = "1 month", limits = as.Date(c('15/7/2021', '02/11/2021'), format="%d/%m/%Y"), date_labels = "%b")+
labs(
title="Ціни на продукти харчування: у супермаркеті та підрахунках держстату",
subtitle="Держстат бере для підрахунку інфляції не дорогі продукти, проте не найдешевші. \nНа графіку нижче ціни на продукти в одному з відомих супермаркетів (сині лінії) і ціни \nз розрахунків держстату (червона)",
color='',
y="", x="")+
scale_color_identity(name = "",
breaks = c("#D7005C", "#000080", "#7CB3C5"),
labels = c("держстат", "супермаркет: усереднена (1 квартиль)", "супермаркет: мінімальна"),
guide = "legend")+
# scale_fill_gradientn(colors = c("#7CB3C5", "#000080", "black"),
#                      breaks = c(0, 50, 200, 300))+
# scale_fill_gradient2(low = "white", high = "#000080") +
scale_fill_gradientn(limits = c(0,400),
colours=c("#7CB3C5", "#000080", "black"))+
theme_minimal()+
guides(fill = 'none')+
theme(
legend.title=element_text(size=11),
legend.justification = "left",
legend.position='top',
legend.margin = margin(c(5, 5, 5, 0)),
legend.text = element_text(size=11, family=fontfamily, color=text_color, margin = margin(r = 10, unit = "pt")),
panel.spacing.x=unit(0.5, "lines") ,
panel.spacing.y=unit(2,"lines"),
panel.grid.major.x=element_blank(),
panel.grid.minor.x=element_blank(),
panel.grid.minor.y=element_blank(),
strip.text = element_text(hjust=0, face='bold', family=fontfamily, color=text_color),
plot.title = element_text(size=18,
lineheight = 1.6,
margin=margin(0,0,10,0),
face="bold",
color=text_color,
family ='Open Sans'
),
plot.subtitle = element_text(size=15,
lineheight = 1.1,
color=text_color,
family ='Open Sans',
margin=margin(0,0,10,0),
)
)
color_dat = data.frame(y = seq(1, 400, by = 1), z = seq(from=1,to=0,length.out=100) )
ggplot(static_chart_data)+
geom_rect(color_dat, mapping=aes(ymax = y, fill=z), ymin=0, xmin = as.Date("2021-07-15"), xmax= as.Date("2021-07-25"))+
# scale_fill_gradient("#000080", "#7CB3C5")+
geom_line(mapping=aes(x=month, y=price_q1, color = '#000080'))+
geom_line(mapping=aes(x=month, y=price_min, color = '#7CB3C5'))+
geom_line(mapping=aes(x=month, y=price, color = '#D7005C'))+
# annotation_custom(g,xmin = as.Date("2021-07-15"), xmax = as.Date("2021-07-28"), ymin = -Inf,  ymax = Inf ) +
facet_wrap(~item, scales="free", ncol=6) +
scale_y_continuous(expand = expansion(mult = c(0, 0.2), add = c(0, 0.1)), limits=c(0, NA),
breaks=function(x, n = 10) pretty(x, n)[round(pretty(x, n), 1) %% 1 == 0])+
scale_x_date(date_breaks = "1 month", limits = as.Date(c('15/7/2021', '02/11/2021'), format="%d/%m/%Y"), date_labels = "%b")+
labs(
title="Ціни на продукти харчування: у супермаркеті та підрахунках держстату",
subtitle="Держстат бере для підрахунку інфляції не дорогі продукти, проте не найдешевші. \nНа графіку нижче ціни на продукти в одному з відомих супермаркетів (сині лінії) і ціни \nз розрахунків держстату (червона)",
color='',
y="", x="")+
scale_color_identity(name = "",
breaks = c("#D7005C", "#000080", "#7CB3C5"),
labels = c("держстат", "супермаркет: усереднена (1 квартиль)", "супермаркет: мінімальна"),
guide = "legend")+
# scale_fill_gradientn(colors = c("#7CB3C5", "#000080", "black"),
#                      breaks = c(0, 50, 200, 300))+
# scale_fill_gradient2(low = "white", high = "#000080") +
scale_fill_gradientn(limits = c(0,400),
colours=c("#7CB3C5", "#000080", "black"))+
theme_minimal()+
guides(fill = 'none')+
theme(
legend.title=element_text(size=11),
legend.justification = "left",
legend.position='top',
legend.margin = margin(c(5, 5, 5, 0)),
legend.text = element_text(size=11, family=fontfamily, color=text_color, margin = margin(r = 10, unit = "pt")),
panel.spacing.x=unit(0.5, "lines") ,
panel.spacing.y=unit(2,"lines"),
panel.grid.major.x=element_blank(),
panel.grid.minor.x=element_blank(),
panel.grid.minor.y=element_blank(),
strip.text = element_text(hjust=0, face='bold', family=fontfamily, color=text_color),
plot.title = element_text(size=18,
lineheight = 1.6,
margin=margin(0,0,10,0),
face="bold",
color=text_color,
family ='Open Sans'
),
plot.subtitle = element_text(size=15,
lineheight = 1.1,
color=text_color,
family ='Open Sans',
margin=margin(0,0,10,0),
)
)
color_dat = data.frame(y = seq(1, 100, by = 1), z = seq(from=0,to=1,length.out=100) )
ggplot(static_chart_data)+
geom_rect(color_dat, mapping=aes(ymax = y, fill=z), ymin=0, xmin = as.Date("2021-07-15"), xmax= as.Date("2021-07-25"))+
# scale_fill_gradient("#000080", "#7CB3C5")+
geom_line(mapping=aes(x=month, y=price_q1, color = '#000080'))+
geom_line(mapping=aes(x=month, y=price_min, color = '#7CB3C5'))+
geom_line(mapping=aes(x=month, y=price, color = '#D7005C'))+
# annotation_custom(g,xmin = as.Date("2021-07-15"), xmax = as.Date("2021-07-28"), ymin = -Inf,  ymax = Inf ) +
facet_wrap(~item, scales="free", ncol=6) +
scale_y_continuous(expand = expansion(mult = c(0, 0.2), add = c(0, 0.1)), limits=c(0, NA),
breaks=function(x, n = 10) pretty(x, n)[round(pretty(x, n), 1) %% 1 == 0])+
scale_x_date(date_breaks = "1 month", limits = as.Date(c('15/7/2021', '02/11/2021'), format="%d/%m/%Y"), date_labels = "%b")+
labs(
title="Ціни на продукти харчування: у супермаркеті та підрахунках держстату",
subtitle="Держстат бере для підрахунку інфляції не дорогі продукти, проте не найдешевші. \nНа графіку нижче ціни на продукти в одному з відомих супермаркетів (сині лінії) і ціни \nз розрахунків держстату (червона)",
color='',
y="", x="")+
scale_color_identity(name = "",
breaks = c("#D7005C", "#000080", "#7CB3C5"),
labels = c("держстат", "супермаркет: усереднена (1 квартиль)", "супермаркет: мінімальна"),
guide = "legend")+
# scale_fill_gradientn(colors = c("#7CB3C5", "#000080", "black"),
#                      breaks = c(0, 50, 200, 300))+
# scale_fill_gradient2(low = "white", high = "#000080") +
scale_fill_gradientn(limits = c(0,400),
colours=c("#7CB3C5", "#000080", "black"))+
theme_minimal()+
guides(fill = 'none')+
theme(
legend.title=element_text(size=11),
legend.justification = "left",
legend.position='top',
legend.margin = margin(c(5, 5, 5, 0)),
legend.text = element_text(size=11, family=fontfamily, color=text_color, margin = margin(r = 10, unit = "pt")),
panel.spacing.x=unit(0.5, "lines") ,
panel.spacing.y=unit(2,"lines"),
panel.grid.major.x=element_blank(),
panel.grid.minor.x=element_blank(),
panel.grid.minor.y=element_blank(),
strip.text = element_text(hjust=0, face='bold', family=fontfamily, color=text_color),
plot.title = element_text(size=18,
lineheight = 1.6,
margin=margin(0,0,10,0),
face="bold",
color=text_color,
family ='Open Sans'
),
plot.subtitle = element_text(size=15,
lineheight = 1.1,
color=text_color,
family ='Open Sans',
margin=margin(0,0,10,0),
)
)
ggplot(static_chart_data)+
geom_rect(color_dat, mapping=aes(fill=z), ymin=0, ymax = Inf, xmin = as.Date("2021-07-15"), xmax= as.Date("2021-07-25"))+
# scale_fill_gradient("#000080", "#7CB3C5")+
geom_line(mapping=aes(x=month, y=price_q1, color = '#000080'))+
geom_line(mapping=aes(x=month, y=price_min, color = '#7CB3C5'))+
geom_line(mapping=aes(x=month, y=price, color = '#D7005C'))+
# annotation_custom(g,xmin = as.Date("2021-07-15"), xmax = as.Date("2021-07-28"), ymin = -Inf,  ymax = Inf ) +
facet_wrap(~item, scales="free", ncol=6) +
scale_y_continuous(expand = expansion(mult = c(0, 0.2), add = c(0, 0.1)), limits=c(0, NA),
breaks=function(x, n = 10) pretty(x, n)[round(pretty(x, n), 1) %% 1 == 0])+
scale_x_date(date_breaks = "1 month", limits = as.Date(c('15/7/2021', '02/11/2021'), format="%d/%m/%Y"), date_labels = "%b")+
labs(
title="Ціни на продукти харчування: у супермаркеті та підрахунках держстату",
subtitle="Держстат бере для підрахунку інфляції не дорогі продукти, проте не найдешевші. \nНа графіку нижче ціни на продукти в одному з відомих супермаркетів (сині лінії) і ціни \nз розрахунків держстату (червона)",
color='',
y="", x="")+
scale_color_identity(name = "",
breaks = c("#D7005C", "#000080", "#7CB3C5"),
labels = c("держстат", "супермаркет: усереднена (1 квартиль)", "супермаркет: мінімальна"),
guide = "legend")+
# scale_fill_gradientn(colors = c("#7CB3C5", "#000080", "black"),
#                      breaks = c(0, 50, 200, 300))+
# scale_fill_gradient2(low = "white", high = "#000080") +
scale_fill_gradientn(limits = c(0,400),
colours=c("#7CB3C5", "#000080", "black"))+
theme_minimal()+
guides(fill = 'none')+
theme(
legend.title=element_text(size=11),
legend.justification = "left",
legend.position='top',
legend.margin = margin(c(5, 5, 5, 0)),
legend.text = element_text(size=11, family=fontfamily, color=text_color, margin = margin(r = 10, unit = "pt")),
panel.spacing.x=unit(0.5, "lines") ,
panel.spacing.y=unit(2,"lines"),
panel.grid.major.x=element_blank(),
panel.grid.minor.x=element_blank(),
panel.grid.minor.y=element_blank(),
strip.text = element_text(hjust=0, face='bold', family=fontfamily, color=text_color),
plot.title = element_text(size=18,
lineheight = 1.6,
margin=margin(0,0,10,0),
face="bold",
color=text_color,
family ='Open Sans'
),
plot.subtitle = element_text(size=15,
lineheight = 1.1,
color=text_color,
family ='Open Sans',
margin=margin(0,0,10,0),
)
)
color_dat = data.frame(y = seq(1, 100, by = 1), z = seq(from=0,to=400,length.out=100) )
ggplot(static_chart_data)+
geom_rect(color_dat, mapping=aes(fill=z), ymin=0, ymax = Inf, xmin = as.Date("2021-07-15"), xmax= as.Date("2021-07-25"))+
# scale_fill_gradient("#000080", "#7CB3C5")+
geom_line(mapping=aes(x=month, y=price_q1, color = '#000080'))+
geom_line(mapping=aes(x=month, y=price_min, color = '#7CB3C5'))+
geom_line(mapping=aes(x=month, y=price, color = '#D7005C'))+
# annotation_custom(g,xmin = as.Date("2021-07-15"), xmax = as.Date("2021-07-28"), ymin = -Inf,  ymax = Inf ) +
facet_wrap(~item, scales="free", ncol=6) +
scale_y_continuous(expand = expansion(mult = c(0, 0.2), add = c(0, 0.1)), limits=c(0, NA),
breaks=function(x, n = 10) pretty(x, n)[round(pretty(x, n), 1) %% 1 == 0])+
scale_x_date(date_breaks = "1 month", limits = as.Date(c('15/7/2021', '02/11/2021'), format="%d/%m/%Y"), date_labels = "%b")+
labs(
title="Ціни на продукти харчування: у супермаркеті та підрахунках держстату",
subtitle="Держстат бере для підрахунку інфляції не дорогі продукти, проте не найдешевші. \nНа графіку нижче ціни на продукти в одному з відомих супермаркетів (сині лінії) і ціни \nз розрахунків держстату (червона)",
color='',
y="", x="")+
scale_color_identity(name = "",
breaks = c("#D7005C", "#000080", "#7CB3C5"),
labels = c("держстат", "супермаркет: усереднена (1 квартиль)", "супермаркет: мінімальна"),
guide = "legend")+
# scale_fill_gradientn(colors = c("#7CB3C5", "#000080", "black"),
#                      breaks = c(0, 50, 200, 300))+
# scale_fill_gradient2(low = "white", high = "#000080") +
scale_fill_gradientn(limits = c(0,400),
colours=c("#7CB3C5", "#000080", "black"))+
theme_minimal()+
guides(fill = 'none')+
theme(
legend.title=element_text(size=11),
legend.justification = "left",
legend.position='top',
legend.margin = margin(c(5, 5, 5, 0)),
legend.text = element_text(size=11, family=fontfamily, color=text_color, margin = margin(r = 10, unit = "pt")),
panel.spacing.x=unit(0.5, "lines") ,
panel.spacing.y=unit(2,"lines"),
panel.grid.major.x=element_blank(),
panel.grid.minor.x=element_blank(),
panel.grid.minor.y=element_blank(),
strip.text = element_text(hjust=0, face='bold', family=fontfamily, color=text_color),
plot.title = element_text(size=18,
lineheight = 1.6,
margin=margin(0,0,10,0),
face="bold",
color=text_color,
family ='Open Sans'
),
plot.subtitle = element_text(size=15,
lineheight = 1.1,
color=text_color,
family ='Open Sans',
margin=margin(0,0,10,0),
)
)
color_dat = data.frame(y = seq(1, 100, by = 1), z = seq(from=0,to=200,length.out=100) )
ggplot(static_chart_data)+
geom_rect(color_dat, mapping=aes(fill=z), ymin=0, ymax = Inf, xmin = as.Date("2021-07-15"), xmax= as.Date("2021-07-25"))+
# scale_fill_gradient("#000080", "#7CB3C5")+
geom_line(mapping=aes(x=month, y=price_q1, color = '#000080'))+
geom_line(mapping=aes(x=month, y=price_min, color = '#7CB3C5'))+
geom_line(mapping=aes(x=month, y=price, color = '#D7005C'))+
# annotation_custom(g,xmin = as.Date("2021-07-15"), xmax = as.Date("2021-07-28"), ymin = -Inf,  ymax = Inf ) +
facet_wrap(~item, scales="free", ncol=6) +
scale_y_continuous(expand = expansion(mult = c(0, 0.2), add = c(0, 0.1)), limits=c(0, NA),
breaks=function(x, n = 10) pretty(x, n)[round(pretty(x, n), 1) %% 1 == 0])+
scale_x_date(date_breaks = "1 month", limits = as.Date(c('15/7/2021', '02/11/2021'), format="%d/%m/%Y"), date_labels = "%b")+
labs(
title="Ціни на продукти харчування: у супермаркеті та підрахунках держстату",
subtitle="Держстат бере для підрахунку інфляції не дорогі продукти, проте не найдешевші. \nНа графіку нижче ціни на продукти в одному з відомих супермаркетів (сині лінії) і ціни \nз розрахунків держстату (червона)",
color='',
y="", x="")+
scale_color_identity(name = "",
breaks = c("#D7005C", "#000080", "#7CB3C5"),
labels = c("держстат", "супермаркет: усереднена (1 квартиль)", "супермаркет: мінімальна"),
guide = "legend")+
# scale_fill_gradientn(colors = c("#7CB3C5", "#000080", "black"),
#                      breaks = c(0, 50, 200, 300))+
# scale_fill_gradient2(low = "white", high = "#000080") +
scale_fill_gradientn(limits = c(0,400),
colours=c("#7CB3C5", "#000080", "black"))+
theme_minimal()+
guides(fill = 'none')+
theme(
legend.title=element_text(size=11),
legend.justification = "left",
legend.position='top',
legend.margin = margin(c(5, 5, 5, 0)),
legend.text = element_text(size=11, family=fontfamily, color=text_color, margin = margin(r = 10, unit = "pt")),
panel.spacing.x=unit(0.5, "lines") ,
panel.spacing.y=unit(2,"lines"),
panel.grid.major.x=element_blank(),
panel.grid.minor.x=element_blank(),
panel.grid.minor.y=element_blank(),
strip.text = element_text(hjust=0, face='bold', family=fontfamily, color=text_color),
plot.title = element_text(size=18,
lineheight = 1.6,
margin=margin(0,0,10,0),
face="bold",
color=text_color,
family ='Open Sans'
),
plot.subtitle = element_text(size=15,
lineheight = 1.1,
color=text_color,
family ='Open Sans',
margin=margin(0,0,10,0),
)
)
ggplot(static_chart_data)+
geom_rect(aes(fill=price), ymin=0, ymax = Inf, xmin = as.Date("2021-07-15"), xmax= as.Date("2021-07-25"))+
# scale_fill_gradient("#000080", "#7CB3C5")+
geom_line(mapping=aes(x=month, y=price_q1, color = '#000080'))+
geom_line(mapping=aes(x=month, y=price_min, color = '#7CB3C5'))+
geom_line(mapping=aes(x=month, y=price, color = '#D7005C'))+
# annotation_custom(g,xmin = as.Date("2021-07-15"), xmax = as.Date("2021-07-28"), ymin = -Inf,  ymax = Inf ) +
facet_wrap(~item, scales="free", ncol=6) +
scale_y_continuous(expand = expansion(mult = c(0, 0.2), add = c(0, 0.1)), limits=c(0, NA),
breaks=function(x, n = 10) pretty(x, n)[round(pretty(x, n), 1) %% 1 == 0])+
scale_x_date(date_breaks = "1 month", limits = as.Date(c('15/7/2021', '02/11/2021'), format="%d/%m/%Y"), date_labels = "%b")+
labs(
title="Ціни на продукти харчування: у супермаркеті та підрахунках держстату",
subtitle="Держстат бере для підрахунку інфляції не дорогі продукти, проте не найдешевші. \nНа графіку нижче ціни на продукти в одному з відомих супермаркетів (сині лінії) і ціни \nз розрахунків держстату (червона)",
color='',
y="", x="")+
scale_color_identity(name = "",
breaks = c("#D7005C", "#000080", "#7CB3C5"),
labels = c("держстат", "супермаркет: усереднена (1 квартиль)", "супермаркет: мінімальна"),
guide = "legend")+
# scale_fill_gradientn(colors = c("#7CB3C5", "#000080", "black"),
#                      breaks = c(0, 50, 200, 300))+
# scale_fill_gradient2(low = "white", high = "#000080") +
scale_fill_gradientn(limits = c(0,400),
colours=c("#7CB3C5", "#000080", "black"))+
theme_minimal()+
guides(fill = 'none')+
theme(
legend.title=element_text(size=11),
legend.justification = "left",
legend.position='top',
legend.margin = margin(c(5, 5, 5, 0)),
legend.text = element_text(size=11, family=fontfamily, color=text_color, margin = margin(r = 10, unit = "pt")),
panel.spacing.x=unit(0.5, "lines") ,
panel.spacing.y=unit(2,"lines"),
panel.grid.major.x=element_blank(),
panel.grid.minor.x=element_blank(),
panel.grid.minor.y=element_blank(),
strip.text = element_text(hjust=0, face='bold', family=fontfamily, color=text_color),
plot.title = element_text(size=18,
lineheight = 1.6,
margin=margin(0,0,10,0),
face="bold",
color=text_color,
family ='Open Sans'
),
plot.subtitle = element_text(size=15,
lineheight = 1.1,
color=text_color,
family ='Open Sans',
margin=margin(0,0,10,0),
)
)
write.csv(static_chart_data, "/home/yevheniia/git/food_prices/data/static_chart_prices.csv", row.names = F)
static_chart_data = govstat_data %>%
left_join(ashan_data_price, by=c("item", "month")) %>%
left_join(ashan_data_cpi, by=c("item", "month")) %>%
left_join(item_amount, by="item") %>%
filter(sample > 10) %>%
mutate(item = str_replace_all(item, setNames(replacement_products, products))) %>%
mutate(price_min = ifelse(!is.na(weight), price_min/1000 * weight, price_min)) %>%
mutate(price_q1 = ifelse(!is.na(weight), price_q1/1000 * weight, price_q1)) %>%
filter(item %in% c('апельсини', 'борошно пшеничне', 'горілка', 'морозиво', 'кава мелена', 'картопля', 'ковбаси варені 1ґ', 'ковбаси варені вґ', 'мед', 'молоко 3.2%', 'молоко 2.5%', 'сухофрукти', 'яловичина', 'свинина', 'сметана 10-15%', 'філе куряче', 'цукерки шоколадні',
'олія соняшникова', 'олія оливкова', 'цукор', 'яблука', 'сосиски, сардельки вґ', 'рис')) %>%
select(-category.x, -category.y)
write.csv(static_chart_data, "/home/yevheniia/git/food_prices/data/govstat_market_compare_prices.csv", row.names = F)
static_chart_data = govstat_data %>%
left_join(ashan_data_price, by=c("item", "month")) %>%
left_join(ashan_data_cpi, by=c("item", "month")) %>%
left_join(item_amount, by="item") %>%
filter(sample > 10) %>%
mutate(item = str_replace_all(item, setNames(replacement_products, products))) %>%
mutate(price_min = ifelse(!is.na(weight), price_min/1000 * weight, price_min)) %>%
mutate(price_q1 = ifelse(!is.na(weight), price_q1/1000 * weight, price_q1)) %>%
filter(item %in% c('апельсини', 'борошно пшеничне', 'горілка', 'морозиво', 'кава мелена', 'картопля', 'ковбаси варені 1ґ', 'ковбаси варені вґ', 'мед', 'молоко 3.2%', 'молоко 2.5%', 'сухофрукти', 'яловичина', 'свинина', 'сметана 10-15%', 'філе куряче', 'цукерки шоколадні',
'олія соняшникова', 'олія оливкова', 'цукор', 'морепродукти', 'яблука', 'сосиски, сардельки вґ', 'рис')) %>%
select(-category.x, -category.y)
write.csv(static_chart_data, "/home/yevheniia/git/food_prices/data/govstat_market_compare_prices.csv", row.names = F)
